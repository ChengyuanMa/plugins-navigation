/*
	jQuery Navigation Plugin
	Copyright (c) 2011 Daniel Thomson
	
	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php
*/

var menuTimer; (function(b){b.fn.navPlugin=function(a){var c=b.extend(true,{},{navWidth:900,itemWidth:150,itemHeight:50,navEffect:"slide",speed:50},a);this.each(function(){var d=b(this);d.effect=c.navEffect;b.fn.navPlugin.addClasses(d);b.fn.navPlugin.addCss(d,c);b.fn.navPlugin.addTopRowEffect(d,menuTimer);b.fn.navPlugin.addSubMenuEffect(d,menuTimer)});return this};b.fn.navPlugin.addClasses=function(a){a.children("li").addClass("toprow");a.children("li.toprow").children("ul").addClass("submenu");a.find("li:has(ul)").addClass("stack")};b.fn.navPlugin.addCss= function(a,c){a.css({display:"inline"});a.find("li").css({display:"block",width:c.itemWidth+"px",height:c.itemHeight+"px","float":"left",position:"relative"});a.find("li").find("a").css({height:c.itemHeight-2+"px",width:c.itemWidth-2+"px",display:"block","line-height":c.itemHeight-2+"px"});a.find("li").find("ul").css({"margin-left":"0px",position:"absolute",top:"-1px",left:"0px",display:"block",height:"0px",width:"0px"});a.find(".stack").css({position:"relative"});a.find(".stack").find("ul").css({position:"absolute", top:"-1px",left:"0px"});a.find(".toprow").css({"float":"left"});a.find(".toprow").find("ul").css({"margin-top":c.itemHeight+1+"px"});a.find(".toprow").find("ul").find("li").css({position:"relative",display:"none"});a.find(".toprow").find("ul").find("li").find("ul").css({left:c.itemWidth+"px",top:"0px",position:"absolute","margin-top":"0px"});a.find(".toprow").find("ul").find("li").find("ul").find("li").css({"margin-top":"0px"});a.find(".toprow").find(".submenu").find("li").css({display:"none"})}; b.fn.navPlugin.addTopRowEffect=function(a,c){a.children("li.toprow").mouseover(function(){clearTimeout(menuTimer);b(this).addClass("hover");if(a.effect=="slide"){a.children("li.hover").children("ul").children("li").slideDown(a.speed);a.children("li.toprow:not(.hover)").children("ul").children("li").slideUp(a.speed)}else{a.children("li.hover").children("ul").children("li").css("display","block");a.children("li.toprow:not(.hover)").children("ul").children("li").fadeOut(a.speed)}a.children("li.hover").children("ul").children("li").children("ul").css("display", "none");return false});a.children("li.toprow").mouseout(function(){b(this).removeClass("hover");b.fn.navPlugin.setTimer(a,c);return false})};b.fn.navPlugin.addSubMenuEffect=function(a,c){a.children("li.toprow").find("li").mouseover(function(){clearTimeout(menuTimer);b(this).addClass("hover");a.find("li.hover").children("ul").css("display","block");if(a.effect=="slide"){a.find("li.hover").children("ul").children("li").slideDown(a.speed);b(this).siblings("li").children("ul").children("li").slideUp(a.speed)}else{a.find("li.hover").children("ul").children("li").css("display", "block");b(this).siblings("li").children("ul").children("li").fadeOut(a.speed)}a.find("li.hover").children("ul").children("li").children("ul").css("display","none");return false});a.find("li.toprow").find("li").mouseout(function(){b(this).removeClass("hover");b.fn.navPlugin.setTimer(a,c);return false})};b.fn.navPlugin.setTimer=function(a){clearTimeout(menuTimer);menuTimer=setTimeout(function(){b.fn.navPlugin.hideNav(a)},100)};b.fn.navPlugin.hideNav=function(a){if(a.effect=="slide"){a.find("li.toprow ul").children("li").slideUp(a.speed); a.find("li.toprow ul").children("ul").slideUp(a.speed)}else{a.find("li.toprow ul").children("li").fadeOut(a.speed);a.find("li.toprow ul").children("ul").fadeOut(a.speed)}}})(jQuery);